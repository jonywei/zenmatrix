{% extends 'base.html' %}
{% block title %}资金账户{% endblock %}
{% block content %}
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <div class="bg-indigo-600 text-white p-6 rounded-2xl shadow-lg">
        <p class="text-indigo-200 text-xs font-bold mb-1">企业净资产</p>
        <h1 class="text-4xl font-black" id="net">0.00</h1>
    </div>
    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
        <p class="text-gray-400 text-xs font-bold mb-1">现金结余</p>
        <h1 class="text-3xl font-bold text-gray-800" id="cash">0.00</h1>
    </div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
    <h3 class="font-bold text-gray-800 mb-4">账户列表</h3>
    <div id="list" class="space-y-3"></div>
</div>
<script>
    async function load() {
        const res = await axios.get('/api/analysis/accounting/?t='+Date.now());
        const d = res.data;
        document.getElementById('net').innerText = '¥' + d.net_worth.toLocaleString();
        document.getElementById('cash').innerText = d.cash.toLocaleString();
        document.getElementById('list').innerHTML = d.accounts.map(a=>`
            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                <span class="font-bold text-gray-700">${a.name}</span>
                <span class="font-mono font-bold">¥${a.balance.toLocaleString()}</span>
            </div>`).join('');
    }
    load();
</script>
{% endblock %}